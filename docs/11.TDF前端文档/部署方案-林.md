# 部署方式
## 1.nginx
~~~
前端打包：npm run build
将dist文件下资源上传至服务器，记录资源路径；
配置nginx，将root指向该资源路径，参考配置如下：

server {
    listen       8789;
    location / {
        root   /data/tdf/ui;
        index  index.html index.htm;
    }
}
~~~
## 2.tomcat
~~~

前端打包：npm run build
将dist文件下资源上传至Tomcat服务器；
配置server.xml，配置前端端口，参考配置如下：

<Connector port="8789" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />

~~~
## 3.docker
3.1配置tdf-ui-sample前端nginx镜像，前端打包后将dist上传至服务器，记录资源路径，设置启动配置，将资源路径映射到docker中，参考配置如下所示：
~~~
  tdf-ui-sample:
    image: kitematic/hello-world-nginx
    container_name: tdf-ui-sample
    volumes:
      #资源路径映射到docker的website_files路径
      - /home/ubuntu/iri/tdfbase/tdf-ui-vue/dist:/website_files
    ports:
      - "8789:80"
~~~
3.2配置tdf-base后端镜像，配置Dockerfile文件，并将jar包拷贝至该目录下，配置jar包路径映射，配置启动命令，详细参考配置如下所示：
~~~
FROM lib.taiji.com.cn:8084/library/java:8
# 拷贝文件到容器，也可以直接写成ADD xxxxx.jar /app.jar
ADD tdf-sys-sample-jpa-2.3.1.jar /app.jar
# 配置容器启动后执行的命令
# -D 是新增参数，参数的名字叫 java.security.egd ，参数的值叫 file:/dev/./urandom，是为了解决随机数生成的问题
ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/app.jar"]
~~~
创建tdf-base后端镜像
~~~
#指定版本
docker build -t tdfbase :2.3.1 .
#指定latest版本
docker build -t tdfbase  .
~~~
3.3启动docker容器
~~~
启动
docker-compose -f docker-compose-base-union.yml up -d
停止
docker-compose -f docker-compose-base-union.yml down
~~~
3.4其他命令
~~~
拷贝文件到docker容器中
docker cp index.png  7d98a3ceb0dd:/storage/FileStorageControllerImg
进入到docker容器中
docker  ps
docker exec -it 7d98a3ceb0dd /bin/bash
~~~
