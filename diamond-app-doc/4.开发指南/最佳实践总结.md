### 不建议使用外键
1. 当做系统对接时候，etl遇到外键很痛苦(不太对)

### 最佳实践
1. 发生service互相调用时候一定要注意事务传播属性的配置


1. 所有事务配置移动到Service实现类Impl中定义，不要在接口中使用。
1. 删除所有查询方法中的事务配置，查询方法不应该有事务。如果其他有事务的service调用了查询方法导致事务失效，需要考虑调用代码逻辑是否有问题。
1. 事务要增加“rollbackFor = Exception.class”


1. controller层负责参数的校验


1. 统一异常最佳实践
1. Restful接口最佳实践
1. 前后端开发模式最佳实践

1. 赵敏使用提的问题,业务逻辑写在service层。controller层基本不写什么代码，讲清楚如何在service层覆盖默认的实现逻辑


### gradle工程构建相关最佳实践
1. 关于是否使用Gradle Wrapper（gradle和gradlew的区别）
    1. gradle新版本发布速度比较快，建议使用
    论点：1. gradlew解决每个项目个性化gradle版本问题 2. gradlew导致每次构建项目重新下载完整gradle环境，非常慢
1. 


### 老文档移植过来的
缓存文章：
https://www.cnblogs.com/coding-one/p/12401630.html

https://blog.csdn.net/kamiaowudi/article/details/104892177  ： Spring Cache 给我们提供了操作Redis缓存的便捷方法，但是也有很多局限性。比如说我们想单独设置一个缓存值的有效期怎么办？我们并不想缓存方法的返回值，我们想缓存方法中产生的中间值怎么办？此时我们就需要用到RedisTemplate这个类了，接下来我们来讲下如何通过RedisTemplate来自由操作Redis中的缓存。

尽量根据Id来查询，增加缓存命中率

### 开发文档
#### 1.梳理业务确定Domain
梳理业务： domain与domain的管理关系
事务与事务间关系
主表和子表，两个主表
关于关联表的写法

### Diamond评价指标（内部使用，技术支持使用）
从v2.1.14版本开始，建立评价指标（内部使用，技术支持使用）
主体：项目，个人
1. 哪些项目在用，版本情况，反馈情况。处于什么阶段（正在调研，使用中，放弃）。
1. 哪些人在用，什么水平，遇到哪些问题。


## 基于Diamond框架开发最佳实践
[+].......
### 五.controller层API接口设计最佳实践
#### 一.前后端分离API接口要保留适度通用性
与传统MVC架构不同，前后端分离架构下，一套后端会同时支持多套前端。因此后端接口属于API范畴，前后端分离API接口要保留“适度通用性”。
* "适度通用性"解释
    1. 不提供业务过细、局限性过大的接口，这样意味着代码量庞大冗余。
    1. 不提供过于大而全的接口，这样意味着接口设计不友好，传参过于复杂。
    1. 提供多个脱离具体业务的接口，同时控制接口传参复杂度。
* **举个例子：社区博客的接口：isAuthor(blogId) vs findById(blogId) vs findUserIdById(blogId)：**  

    需求场景：判断社区当前登录用户是不是博客的作者。  

|方法|描述|评价|  
|------|-----|---|
|isAuhtor(blogId)|只支持判断当前登录用户是否是作者|接口过细，传统mvc写法，完全贴近业务|
|findById(blogId)|查询出博客所有属性，其中包括userId|适度通用，优点是框架提供此接口，用户不用再重新写，缺点是用户冗余属性多，用户只要userID（前后端分离，API写法，适度的通用性）|
|findUserIdById(blogId)|只查询UserId|适度通用，优点是在多个业务场景都可用，缺点是，需要用户写这样的接口多一些代码（前后端分离，API写法，更多考虑性能和带宽）|

### 六.所有继承BaseXXXXController的代码都需要配置类级别的
@RequestMapping注解，并且指定路径。否则会产生mapping映射重复等莫名其妙问题，如405错误。https://blog.csdn.net/weixin_38229356/article/details/81007528
这也是定义接口命名规范的一部分。


### 七.所有的PageDTO主要要增加泛型PageDTO<XXXDTO>


### 八.前后端分离代码边界最佳实践
|代码类型|在后端实现|在前端实现|  
|------|-----|---|
|1.数据格式转换类型|否|是|

#### 1.数据格式转换类型
1. 时间日期
后端存储时间戳，返回时间戳。前端根据时间戳和具体显示需求转换为时间日期字符串
1. 树型Tree数据  
后端返回平铺的原始包含id和parentId的List数据。前端根据List数据和不同的树型UI组件转换为Tree格式数据

#### 如何提高交付能力
1. 效率高+稳定
1. 可学习性
1. 

#### 架构师使用建议
1. 关注问题本质。驱动本质，而不是驱动细节。评审时，架构师应该驱动需求的本质，而非细节。即使是最简单的逻辑也有许多种编码方式，而且其中有许多都能够完美地实现功能，尽管并非完全照搬架构师的思路。
1. 不能只处理难题。只处理难题不利于团队发展。架构师解决了所有的难题的同时也就剥夺了其他人挖掘和学习新知识的机会。
1. 关注结果，充分授权，培养团队成员的主人翁意识，提供成长的机会


### 关于事务在service层的传播
1. 需求；在工位上赵召、赵敏、陈哲、王宏伟一起聊事务后，发现每个人对事务传播的理解都不同，大家对事务的理解有歧义
1. 实际场景分析: 方法A-调用->方法B-调用->方法C （所有方法都在service层)

| 方法A        | 方法B    |  方法C  |   回滚情况  |
| --------   | -----:   | :----: | :----: |
| 无        | 有      |       |      |
| 苹果        | $1      |   6    |   |
| 草莓        | $1      |   7    |     |

同一个类中：
1. 没有事务的方法来调用标注注解@Transactional方法，最后的结论是没有事务
不同类中：
1. 没有事务的方法来调用标注注解@Transactional方法，最后的结论是有事务

在当前含有事务方法内部调用其他的方法(无论该方法是否含有事务)，这就属于Spring事务传播机制的知识点范畴了


对各个部门人们来说，不用也可以，但是只要用了，就会有很多好处，比如：
1. 与公司其他部门其他项目，统一一致的代码风格，使得部门间技术差异化变小，更利于部门间
协作，整体提高公司协同效率。
1. 
### 参考
1. http://blog.itpub.net/69900354/viewspace-2565243/

servless一般是脚本如js，也许是引用外部包方便