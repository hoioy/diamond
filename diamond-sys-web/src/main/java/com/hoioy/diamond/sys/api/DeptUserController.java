package com.hoioy.diamond.sys.api;import com.hoioy.diamond.common.annotation.BaseJoinId;import com.hoioy.diamond.common.api.BaseJoinController;import com.hoioy.diamond.common.dto.ResultDTO;import com.hoioy.diamond.sys.dto.DeptInfoDTO;import com.hoioy.diamond.sys.dto.DeptUserJoinDTO;import com.hoioy.diamond.sys.dto.UserInfoDTO;import com.hoioy.diamond.sys.service.IDeptInfoService;import com.hoioy.diamond.sys.service.IDeptUserService;import com.hoioy.diamond.sys.service.IUserInfoService;import io.swagger.annotations.Api;import io.swagger.annotations.ApiOperation;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import java.util.Arrays;import java.util.List;@RestController@Api(tags = {"10.用户与部门关联操作接口"})@RequestMapping("/sys/dept-user")public class DeptUserController extends BaseJoinController<IDeptUserService, DeptUserJoinDTO> {    @Autowired    private IDeptInfoService iDeptInfoService;    @Autowired    private IUserInfoService iUserInfoService;    @ApiOperation(value = "根据用户Id查询用户所有部门")    @GetMapping(value = "/findDeptInfosByUserId")    public ResultDTO findDeptInfosByUserId(String userId) {        List<String> deptIds = iBaseService.findDeptIdsByUserIds(Arrays.asList(userId));        List<DeptInfoDTO> deptInfoDTOS = iDeptInfoService.findByIds(deptIds);        return new ResultDTO(deptInfoDTOS);    }    @ApiOperation(value = "根据部门Id查询部门下所有用户")    @GetMapping(value = "/findUsersByDeptInfoId")    public ResultDTO findUsersByDeptInfoId(String deptInfoId) {        List<String> userIds = iBaseService.findUserIdsByDeptIds(Arrays.asList(deptInfoId));        List<UserInfoDTO> userInfoDTOS = iUserInfoService.findByIds(userIds);        return new ResultDTO(userInfoDTOS);    }    @ApiOperation(value = "根据用户Id集合查询用户与部门关联关系")    @PostMapping(value = "/findByUserIds")    public ResultDTO<List<DeptUserJoinDTO>> findByUserIds(@RequestBody List<String> userIds) {        List<String> ids = iBaseService.findIdsByJoinIds(userIds, BaseJoinId.Index.second);        List<DeptUserJoinDTO> dtoList = iBaseService.findByIds(ids);        return new ResultDTO(dtoList);    }}